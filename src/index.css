@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    /* Light Mode - White Background with Deep Blue Text */
    --background: 0 0% 100%; /* Pure white background */
    --foreground: 217 91% 15%; /* Very deep blue text */

    --card: 217 91% 95%; /* Very light blue card background */
    --card-foreground: 217 91% 15%; /* Deep blue card text */

    --popover: 0 0% 100%; /* White popover */
    --popover-foreground: 217 91% 15%; /* Deep blue popover text */

    --primary: 217 91% 60%; /* Blue primary */
    --primary-foreground: 0 0% 100%; /* White primary text */

    --secondary: 217 91% 85%; /* Light blue secondary */
    --secondary-foreground: 217 91% 20%; /* Deep blue secondary text */

    --muted: 217 91% 90%; /* Very light blue muted */
    --muted-foreground: 217 91% 35%; /* Deep blue muted text */

    --accent: 217 91% 70%; /* Medium blue accent */
    --accent-foreground: 0 0% 100%; /* White accent text */

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 217 91% 75%; /* Light blue borders */
    --input: 0 0% 100%; /* White input background */
    --ring: 217 91% 60%;

    --radius: 0.75rem;
  }

  .dark {
    /* Dark Mode - Much Darker Blue Background */
    --background: 217 100% 2%; /* Much darker blue background */
    --foreground: 0 0% 100%; /* White text */

    --card: 217 100% 3%; /* Much darker blue card background */
    --card-foreground: 0 0% 100%; /* White card text */

    --popover: 217 100% 2%; /* Much darker blue popover */
    --popover-foreground: 0 0% 100%; /* White popover text */

    --primary: 217 91% 60%; /* Blue primary */
    --primary-foreground: 0 0% 100%; /* White primary text */

    --secondary: 217 91% 20%; /* Dark blue secondary */
    --secondary-foreground: 0 0% 100%; /* White secondary text */

    --muted: 217 91% 15%; /* Dark blue muted */
    --muted-foreground: 217 91% 70%; /* Light blue muted text */

    --accent: 217 91% 50%; /* Medium blue accent */
    --accent-foreground: 0 0% 100%; /* White accent text */

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 98%;

    --border: 217 91% 25%; /* Medium dark blue borders */
    --input: 217 91% 15%; /* Dark blue input background */
    --ring: 217 91% 60%;
  }

  /* Common variables for both themes */
  :root {
    /* Blue gradient variations for cards */
    --gradient-primary: linear-gradient(135deg, hsl(217 91% 60%), hsl(217 91% 70%), hsl(217 91% 50%));
    --gradient-card: linear-gradient(135deg, hsl(217 91% 95%), hsl(217 91% 92%), hsl(217 91% 97%));
    --gradient-card-blue: linear-gradient(135deg, hsl(217 91% 85%), hsl(217 91% 90%), hsl(217 91% 88%));
    --gradient-card-medium: linear-gradient(135deg, hsl(217 91% 75%), hsl(217 91% 80%), hsl(217 91% 78%));
    --gradient-card-dark: linear-gradient(135deg, hsl(217 91% 65%), hsl(217 91% 70%), hsl(217 91% 68%));
    --gradient-hero: linear-gradient(180deg, hsl(0 0% 100%), hsl(217 91% 98%));
    --shadow-card: 0 8px 32px hsl(217 91% 60% / 0.1), 0 4px 16px hsl(217 32% 17% / 0.05);
    --shadow-player: 0 16px 48px hsl(217 91% 60% / 0.15), 0 8px 24px hsl(217 32% 17% / 0.1);
    
    /* San Francisco font system */
    --font-sf: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', system-ui, sans-serif;
    
    /* Approved text colors for white background */
    --text-white: 0 0% 100%;
    --text-blue-50: 217 32% 17%; /* Very dark blue for high contrast */
    --text-blue-100: 217 32% 25%; /* Dark blue */
    --text-blue-200: 217 32% 35%; /* Medium dark blue */
    --text-blue-300: 217 91% 50%; /* Medium blue */
    --text-blue-400: 217 91% 60%; /* Primary blue */
    --text-blue-500: 217 91% 55%; /* Slightly darker blue */
    --text-blue-600: 217 91% 45%; /* Darker blue */
    --text-blue-700: 217 91% 35%; /* Much darker blue */
    --text-blue-800: 217 32% 25%; /* Very dark blue */
    --text-blue-900: 217 32% 17%; /* Almost black blue */

    /* Card color variations - different shades of blue */
    --card-light: 217 91% 95%; /* Very light blue */
    --card-medium: 217 91% 85%; /* Medium light blue */
    --card-darker: 217 91% 75%; /* Medium blue */
    --card-darkest: 217 91% 65%; /* Darker blue */

    /* Music categories with different blue shades for cards */
    --music-focus: 217 91% 85%; /* Light blue for focus cards */
    --music-mood: 217 91% 80%; /* Medium light blue for mood boost cards */
    --music-sleep: 217 91% 75%; /* Medium blue for sleep cards */
    --music-energy: 217 91% 70%; /* Medium dark blue for energy cards */

    --sidebar-background: 217 91% 95%;
    --sidebar-foreground: 217 32% 17%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 217 91% 85%;
    --sidebar-accent-foreground: 217 32% 17%;
    --sidebar-border: 217 91% 75%;
    --sidebar-ring: 217 91% 60%;
  }
}

@layer base {
  * {
    @apply border-border;
    font-family: var(--font-sf) !important;
  }

  html, body {
    @apply bg-background text-foreground;
    font-family: var(--font-sf) !important;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Design System Fix - Additional color and font overrides */
  
  /* Global font application */
  * {
    font-family: var(--font-sf) !important;
  }

  /* Override all text colors for white background */
  h1, h2, h3, h4, h5, h6 {
    color: hsl(var(--text-blue-900)) !important;
    font-family: var(--font-sf) !important;
  }

  p, span, div, label, button {
    font-family: var(--font-sf) !important;
  }

  /* Button text colors */
  button {
    font-family: var(--font-sf) !important;
  }

  .btn-primary {
    color: hsl(var(--text-white)) !important;
  }

  .btn-secondary {
    color: hsl(var(--text-blue-800)) !important;
  }

  /* Link colors */
  a {
    color: hsl(var(--text-blue-400)) !important;
    font-family: var(--font-sf) !important;
  }

  a:hover {
    color: hsl(var(--text-blue-600)) !important;
  }

  /* Form elements */
  input, textarea, select {
    font-family: var(--font-sf) !important;
    color: hsl(var(--text-blue-900)) !important;
    border: 1px solid hsl(var(--border));
  }

  input::placeholder,
  textarea::placeholder {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Status indicators */
  .text-green-500,
  .text-green-400,
  .text-green-300 {
    color: hsl(var(--text-blue-600)) !important;
  }

  .text-red-500,
  .text-red-400,
  .text-red-300 {
    color: hsl(0 84% 60%) !important;
  }

  .text-yellow-500,
  .text-yellow-400,
  .text-yellow-300 {
    color: hsl(var(--text-blue-500)) !important;
  }

  /* Purple color overrides - force to blue */
  .text-purple-500,
  .text-purple-400,
  .text-purple-300,
  .text-purple-600,
  .text-purple-700 {
    color: hsl(var(--text-blue-600)) !important;
  }

  .bg-purple-500,
  .bg-purple-400,
  .bg-purple-600 {
    background-color: hsl(var(--card-medium)) !important;
    color: hsl(var(--text-blue-800)) !important;
  }

  /* Status colors mapped to blue variants */
  .text-green-500,
  .text-green-400,
  .text-green-300 {
    color: hsl(var(--text-blue-400)) !important;
  }

  .text-red-500,
  .text-red-400,
  .text-red-300 {
    color: hsl(var(--text-white)) !important;
  }

  .text-yellow-500,
  .text-yellow-400,
  .text-yellow-300 {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Gray text mapped to blue variants */
  .text-gray-100,
  .text-gray-200,
  .text-gray-300 {
    color: hsl(var(--text-blue-100)) !important;
  }

  .text-gray-400,
  .text-gray-500 {
    color: hsl(var(--text-blue-300)) !important;
  }

  .text-gray-600,
  .text-gray-700,
  .text-gray-800,
  .text-gray-900 {
    color: hsl(var(--text-blue-400)) !important;
  }

  /* Component-specific fixes */
  .mood-card {
    color: hsl(var(--text-blue-900)) !important;
    font-family: var(--font-sf) !important;
  }

  .mood-card h3 {
    color: hsl(var(--text-blue-900)) !important;
  }

  .mood-card p {
    color: hsl(var(--text-blue-600)) !important;
  }

  /* Track card fixes */
  .track-card {
    font-family: var(--font-sf) !important;
  }

  .track-card .title {
    color: hsl(var(--text-white)) !important;
  }

  .track-card .artist,
  .track-card .album {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Navigation fixes */
  nav, .nav-item {
    font-family: var(--font-sf) !important;
    color: hsl(var(--text-white)) !important;
  }

  /* Status panel fixes */
  .status-success {
    color: hsl(var(--text-blue-400)) !important;
  }

  .status-error {
    color: hsl(var(--text-white)) !important;
  }

  .status-warning {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Diagnostic panel fixes */
  .diagnostic-item {
    font-family: var(--font-sf) !important;
  }

  .diagnostic-item h4 {
    color: hsl(var(--text-white)) !important;
  }

  .diagnostic-item p {
    color: hsl(var(--text-blue-200)) !important;
  }

  /* Icon colors */
  .icon-success {
    color: hsl(var(--text-blue-400)) !important;
  }

  .icon-error {
    color: hsl(var(--text-white)) !important;
  }

  .icon-warning {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Connectivity panel fixes */
  .connectivity-panel {
    font-family: var(--font-sf) !important;
  }

  .connectivity-panel .title {
    color: hsl(var(--text-white)) !important;
  }

  .connectivity-panel .status {
    color: hsl(var(--text-blue-300)) !important;
  }

  /* Audio player fixes */
  .audio-player {
    font-family: var(--font-sf) !important;
  }

  .audio-player .track-title {
    color: hsl(var(--text-white)) !important;
  }

  .audio-player .track-info {
    color: hsl(var(--text-blue-200)) !important;
  }

  /* Responsive font sizes with San Francisco */
  @media (max-width: 768px) {
    h1 { font-size: 1.5rem; font-family: var(--font-sf) !important; }
    h2 { font-size: 1.25rem; font-family: var(--font-sf) !important; }
    h3 { font-size: 1.125rem; font-family: var(--font-sf) !important; }
  }

  /* Debug - highlight any remaining purple (remove after fixing) */
  [style*="purple"],
  [class*="purple"] {
    outline: 2px solid red !important;
    color: hsl(var(--text-blue-400)) !important;
  }

  /* Apple-style button focus styles */
  button:focus {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
  }

  /* Improved scrollbar for webkit browsers */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--muted-foreground) / 0.3);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground) / 0.5);
  }

  /* Line clamp utilities for text truncation */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Container with responsive max-width */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  @media (min-width: 640px) {
    .container {
      padding: 0 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .container {
      padding: 0 2rem;
    }
  }

  @media (min-width: 1400px) {
    .container {
      padding: 0 2.5rem;
    }
  }

  /* Responsive grid system */
  .responsive-grid {
    display: grid;
    gap: 1rem;
  }

  @media (min-width: 640px) {
    .responsive-grid {
      gap: 1.5rem;
    }
  }

  @media (min-width: 1024px) {
    .responsive-grid {
      gap: 2rem;
    }
  }

  /* Enhanced mobile-first responsive fixes */
  @media (max-width: 479px) {
    .container {
      padding: 0 0.75rem;
    }
    
    /* Ensure buttons are touch-friendly on mobile */
    button, .btn {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Improve text readability on small screens */
    h1, h2, h3 {
      word-break: break-word;
      hyphens: auto;
    }

    /* Touch-friendly navigation elements */
    .nav-button {
      min-height: 48px;
      min-width: 48px;
    }
  }

  @media (min-width: 480px) and (max-width: 639px) {
    .container {
      padding: 0 1rem;
    }
  }

  /* Ensure images are responsive with performance optimizations */
  img {
    max-width: 100%;
    height: auto;
    display: block;
  }

  /* Lazy loading placeholder */
  .img-loading {
    background: linear-gradient(90deg, hsl(var(--muted)) 0%, hsl(var(--muted-foreground) / 0.1) 50%, hsl(var(--muted)) 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  /* Fix mobile viewport units with CSS custom properties */
  .min-h-screen {
    min-height: 100vh;
    min-height: calc(var(--vh, 1vh) * 100);
  }

  /* Improved scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Enhanced custom scrollbar styles with responsive sizing */
  ::-webkit-scrollbar {
    width: 6px;
  }

  @media (min-width: 768px) {
    ::-webkit-scrollbar {
      width: 8px;
    }
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--background));
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--border) / 0.8);
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .card {
      border: 2px solid hsl(var(--foreground));
    }
    
    button {
      border: 2px solid hsl(var(--foreground));
    }
  }

  /* Print styles */
  @media print {
    .nav-container,
    .navigation,
    button:not(.print-button) {
      display: none;
    }
    
    body {
      font-size: 12pt;
      line-height: 1.4;
      color: black;
      background: white;
    }
    
    .card {
      break-inside: avoid;
      page-break-inside: avoid;
    }
  }
}